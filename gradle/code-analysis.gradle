buildscript {
    repositories {
        maven {
            url 'https://plugins.gradle.org/m2/'
        }
    }
    dependencies {
        classpath 'org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:2.8'
    }
}

apply plugin: org.sonarqube.gradle.SonarQubePlugin
apply plugin: 'jacoco'

sonarqube {
    properties {
        property 'sonar.host.url', 'https://sonarcloud.io'
        property 'sonar.organization', 'aureamohammadalavi'
//        property 'sonar.login', System.getenv('SONAR_LOGIN')
        property 'sonar.projectKey', "AureaMohammadAlavi_todo-spring-boot"
        properties['sonar.tests'] += sourceSets.integrationTest.java.srcDirs
        properties["sonar.junit.reportPaths"] += "$testResultsDir/$sourceSets.integrationTest.name"
    }
}

jacocoTestReport {
    reports {
        xml.enabled true
    }
    executionData test, integrationTest
}